<!doctype html>

<!--
Adapted from this tutorial:
https://leafletjs.com/examples/quick-start/
-->


<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Leaflet Test</title>
  <meta name="description" content="Merrill College of Journalism, UMD">
  <meta name="author" content="Adam Marton">

    <!-- Leaflet's CSS-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
     integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
     crossorigin=""/>

    <!-- Leaflet's JS - Make sure you put this AFTER Leaflet's CSS -->
    <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
      integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
      crossorigin=""></script>

    <style>

    body { margin:0; padding:0; }
    #map { position:absolute; top:0; bottom:0; width:100%; }
    </style>


</head>

<body>

  <div id='map'></div>

  <style>
  .map-legend .swatch {
    width:20px;
    height:20px;
    float:left;
    margin-right:10px;
    }
  .leaflet-popup-close-button {
    display: none;
    }
  .leaflet-popup-content-wrapper {
    pointer-events: none;
    }
  </style>
  <script src='us-states.js'></script>




<script>
var map = L.map('map').setView([37.8, -96], 4);

  //call mapbox map with my access token
  L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
      attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
      maxZoom: 18,
      //use mapbox.satellite, mapbox.streets, mapbox.light, others
      id: 'mapbox.light',
      accessToken: 'pk.eyJ1IjoiYW1hcnRvbiIsImEiOiJjajgzdDFrdTcwMXIwMzJubmthd25jY3V2In0.01j1w1cZs1S7b7a4tiMvfg'
  }).addTo(map);


	// get color depending on population density value
	function getColor(d) {
		return d > 1000 ? '#800026' :
				d > 500  ? '#BD0026' :
				d > 200  ? '#E31A1C' :
				d > 100  ? '#FC4E2A' :
				d > 50   ? '#FD8D3C' :
				d > 20   ? '#FEB24C' :
				d > 10   ? '#FED976' :
							'#FFEDA0';
	}

	function style(feature) {
		return {
			weight: 2,
			opacity: 1,
			color: 'white',
			dashArray: '3',
			fillOpacity: 0.7,
			fillColor: getColor(feature.properties.density)
		};
	}

    // Create a function for the map popups
    function onEachFeature(feature, layer) {
        // does this feature have a property named popupContent?
            layer.bindPopup("<p style = \"text-align:center;\">Density:" + parseInt(feature.properties.density) );
    }

  //this adds the colors popups
	var geojson = L.geoJson(statesData, {
		onEachFeature: onEachFeature,
    style: style,
	}).addTo(map);





</script>



</body>
</html>
